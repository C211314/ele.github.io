(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f91fc1c"],{"07ac":function(t,s,i){var e=i("23e7"),a=i("6f53").values;e({target:"Object",stat:!0},{values:function(t){return a(t)}})},"0fa5":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"shopWarp"},[i("nav",[i("i",{staticClass:"el-icon-arrow-left",on:{click:t.zuoBtn}})]),i("header",[t._m(0),i("section",{staticClass:"header_section"},[i("router-link",{attrs:{to:"/shopDetail"}},[i("section",{staticClass:"header_section2"},[i("img",{attrs:{src:"https://elm.cangdu.org/img/"+t.shopArr.image_path,alt:""}})]),i("section",{staticClass:"header_right"},[i("h4",[t._v(t._s(t.shopArr.name))]),i("p",{staticClass:"right_p1"},[t._v("商家配送/分钟到达/配送费￥"+t._s(t.shopArr.float_delivery_fee))]),i("p",{staticClass:"right_p2 ellipsis"},[t._v("公告："+t._s(t.shopArr.promotion_info))])]),i("i",{staticClass:"el-icon-arrow-right header_i",staticStyle:{color:"#fff"}})]),i("footer",{staticClass:"header_footer"},[i("p",{staticClass:"footer_p1 ellipsis"},[i("span",[t._v(t._s(t.icon_name))]),i("span",[t._v(t._s(t.description)+"（APP专享）")])]),i("p",{staticClass:"footer_p2"},[t._v(t._s(t.activeArr.length)+"个活动")]),i("i",{staticClass:"el-icon-arrow-right footer_i"})])],1)]),i("section",{staticClass:"change_show_type"},[i("div",[i("span",{class:{activity_show1:t.is_activity_show1},on:{click:t.clickBtn}},[t._v("商品")])]),i("div",[i("span",{class:{activity_show1:t.is_activity_show2},on:{click:t.pingBtn}},[t._v("评价")])])]),t.shangShow?i("section",{staticClass:"count"},[i("section",{staticClass:"count_shangpin"},[i("section",{staticClass:"count_left"},[i("ul",t._l(t.shangArr,(function(s,e){return i("li",{key:s.id,class:e==t.dianji?"count_left_li":"count_left_li_1",on:{click:function(i){return t.fenBtn(e,s.name,s.description)}}},[i("el-badge",{attrs:{value:t.itemCount(s.id),hidden:!t.itemCount(s.id)}},[i("span",[t._v(t._s(s.name))])])],1)})),0)]),i("section",{staticClass:"count_right"},t._l(t.shangArr,(function(s,e){return i("ul",{key:e},[i("li",{staticClass:"count_right_li"},[i("section",{staticClass:"right_section1"},[i("section",{staticClass:"right_section2"},[i("strong",[t._v(t._s(s.name))]),i("span",[t._v(t._s(s.description))])]),i("span",{staticClass:"dian",on:{click:function(s){t.dianShow=!t.dianShow}}},[t._v("...")]),t.dianShow?i("p",[i("span",[t._v(t._s(t.leftName)+t._s(t.leftDescription))])]):t._e()]),i("ul",t._l(s.foods,(function(s,e){return i("li",{key:e},[i("section",{staticClass:"right_list"},[i("div",{staticClass:"right_list_div"},[i("section",{staticClass:"right_list_div_img"},[i("img",{attrs:{src:"https://elm.cangdu.org/img/"+s.image_path,alt:""}})]),i("section",{staticClass:"right_list_div_section"},[i("h3",[i("strong",[t._v(t._s(s.name))]),i("ul",[!s.attributes.length?t._e():i("li",{staticClass:"attribute_new"},[i("p",{},[t._v("新品")])]),!s.attributes.length?t._e():i("li",{staticClass:"attribute_zhao"},[i("p",[t._v("招牌")])])])]),i("p",[t._v(t._s(s.description))]),i("p",[i("span",[t._v("月售"+t._s(s.month_sales)+"份")]),i("span",[t._v("好评率"+t._s(s.satisfy_rate)+"%")])]),i("p",[i("span",[t._v(" "+t._s(t.fengNull(s.activity))+" ")])])])]),i("footer",{staticClass:"right_list_footer"},[i("section",{staticClass:"footer_price"},[i("span",[t._v("￥")]),i("span",[t._v(t._s(s.specfoods[0].price))]),i("span",[t._v("起")])]),i("section",{staticClass:"right_list_footer_guige"},[!s.specifications.length?t._e():i("span",{on:{click:function(i){return t.guiBtn(s.specfoods,s.category_id,s)}}},[t._v("选规格")])]),s.specifications.length?t._e():i("section",{staticClass:"right_list_footer_jia"},[i("span",{on:{click:function(i){s.specifications.length?t.xuanjianBtn():t.jianBtn(t.foodNum(s),s.category_id,s.item_id,s.specfoods[0].food_id,s.specfoods[0].name,s.specfoods[0].price,s.specfoods[0].specs,s.specfoods[0].packing_fee,s.specfoods[0].sku_id,s.specfoods[0].stock)}}},[i("i",{staticClass:"el-icon-minus"})]),i("span",{staticClass:"cart_num1"},[t._v(t._s(t.foodNum(s)))]),i("span",{},[i("i",{staticClass:"el-icon-plus",on:{click:function(i){return t.jiaBtn(s.category_id,s.item_id,s.specfoods[0].food_id,s.specfoods[0].name,s.specfoods[0].price,s.specfoods[0].specs,s.specfoods[0].packing_fee,s.specfoods[0].sku_id,s.specfoods[0].stock)}}})])]),t._m(1,!0)])])])})),0)])])})),0)]),i("section",{staticClass:"count_goumai"},[i("section",{staticClass:"gou_section1"},[i("div",{staticClass:"gou_div1",style:t.allFoodsPrice?"background-color:#3190e8":"",on:{click:t.gouwucheBtn}},[t.allFoodsPrice?i("span",{staticClass:"gou_div1_span"},[t._v(t._s(t.allItemCount))]):t._e(),i("i",{staticClass:"el-icon-shopping-cart-2",staticStyle:{"font-size":"1.2rem",color:"#fff"}})]),i("div",{staticClass:"gou_div2"},[i("div",[t._v("￥"+t._s(t.allFoodsPrice)+".00")]),i("div",[t._v("配送费￥5")])])]),i("section",{staticClass:"gou_section2",style:t.allFoodsPrice?"background-color:#4cd964":"",on:{click:t.xiadanBtn}},[i("span",[t._v(t._s(t.allFoodsPrice?"去下单":"还差¥20起送"))])])]),t.isShowGou?i("section",{staticClass:"gou_wu_che"},[i("header",{staticClass:"gouwu_header"},[i("span",{staticClass:"gouwu_header_span"},[t._v("购物车")]),i("div",{staticClass:"gouwu_header_div",on:{click:t.qingkongBtn}},[i("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":".6rem"}}),i("span",[t._v("清空")])])]),i("section",{staticClass:"cartFood"},[i("ul",t._l(t.carArr,(function(s,e){return i("li",{key:e,staticClass:"cart_food_li"},[i("div",{staticClass:"cart_food_li_div1"},[t._v(t._s(s.name))]),i("div",{staticClass:"cart_food_li_div2"},[i("span",[t._v("￥")]),i("span",{staticClass:"cart_food_li_div1_span"},[t._v(t._s(s.price))])]),i("section",{staticClass:"cart_list_control"},[i("span",{staticClass:"cart_list_control_span1",on:{click:function(i){t.jianBtn1(s.shopId,s.category_id,s.item_id,s.food_id,s.name,s.price,s.specs,s.packing_fee,s.sku_id,s.stock)}}},[i("i",{staticClass:"el-icon-remove-outline",staticStyle:{"font-size":".9rem",color:"#3190e8"}})]),i("span",{staticClass:"cart_list_control_span2"},[t._v(t._s(s.num))]),i("span",{staticClass:"cart_list_control_span1",on:{click:function(i){t.jiaBtn1(s.shopId,s.category_id,s.item_id,s.food_id,s.name,s.price,s.specs,s.packing_fee,s.sku_id,s.stock)}}},[i("i",{staticClass:"el-icon-circle-plus-outline",staticStyle:{"font-size":".9rem",color:"#3190e8"}})])])])})),0)])]):t._e()]):t._e(),t.pingShow?i("section",{staticClass:"count_pingjia"},[i("section",{},[i("div",{staticClass:"ping_header"},[i("div",{staticClass:"ping_header_left"},[i("p",[t._v(t._s(t.fenArr.food_score.toFixed(1)))]),i("p",[t._v("综合评价")]),i("p",[t._v("高于周边商家"+t._s(100*t.fenArr.compare_rating.toFixed(2))+"%")])]),i("div",{staticClass:"ping_header_right"},[i("p",{staticClass:"ping_header_right_p1"},[i("span",[t._v("服务态度")]),i("span"),i("span",[t._v(t._s(t.fenArr.overall_score.toFixed(1)))])]),i("p",{staticClass:"ping_header_right_p1"},[i("span",[t._v("菜品评价")]),i("span"),i("span",[t._v(t._s(t.fenArr.service_score.toFixed(1)))])]),t._m(2)])]),i("div",{staticClass:"ping_count"},[i("ul",{staticClass:"ping_count_ul"},t._l(t.fenleiArr,(function(s,e){return i("li",{key:s._id,on:{click:function(s){return t.infoBtn(e)}}},[t._v(" "+t._s(s.name)+"（"+t._s(s.count)+" ")])})),0),i("ul",{staticClass:"ping_info"},t._l(t.infoArr,(function(s){return i("li",{key:s._id,staticClass:"ping_info_li"},[i("img",{staticClass:"ping_info_li_img",attrs:{src:"",alt:""}}),i("div",{staticClass:"li_div"},[i("section",{staticClass:"rating_list_details"},[i("section",{staticClass:"username_star"},[i("p",{staticClass:"username"},[t._v(t._s(t.infoArr.username))]),i("p",{staticClass:"star_desc"},[i("span",{staticClass:"rating_container"}),i("span",{staticClass:"time_spent_desc"},[t._v(t._s(t.infoArr.time_spent_desc))])])]),i("time",{staticClass:"rated_at"},[t._v(t._s(t.infoArr.rated_at))])]),i("ul",{staticClass:"food_img_ul"},t._l(t.imgArr,(function(t){return i("li",{key:t._id},[i("img",{attrs:{src:"https://fuss10.elemecdn.com/"+t.image_hash,alt:""}})])})),0),i("ul",{staticClass:"food_img_ul"},t._l(t.chiArr,(function(s){return i("li",{key:s._id,staticClass:"ellipsis"},[t._v(t._s(s.food_name))])})),0)])])})),0)])])]):t._e(),t.guiShow?i("section",[i("div",{staticClass:"specs_cover"}),i("div",{staticClass:"specs_list"},[i("header",{staticClass:"specs_list_header"},[i("h4",{staticClass:"ellipsis"},[t._v(t._s(t.guigeName))]),i("i",{staticClass:"el-icon-close",on:{click:t.chaBtn}})]),i("section",{staticClass:"specs_details"},[i("h5",{staticClass:"specs_details_title"},[t._v("规格")]),i("ul",t._l(t.guigeArr,(function(s,e){return i("li",{key:e,class:e==t.guigeArrBgc?"specs_activity":"specs_activity1 ",on:{click:function(i){return t.guiLiBtn(e,s.specs_name,s)}}},[t._v(t._s(s.specs[0].value))])})),0)]),i("footer",{staticClass:"specs_footer"},[i("div",{staticClass:"specs_price"},[i("span",[t._v("¥ ")]),i("span",[t._v(t._s(t.guiLiPrice.price))])]),i("div",{staticClass:"specs_addto_cart",on:{click:function(s){return t.gouBtn(t.guigeId,t.guigeArr[t.guigeArrBgc].item_id,t.guigeArr[t.guigeArrBgc].food_id,t.guigeName,t.guiLiPrice.price,t.guigeArr[t.guigeArrBgc].specs[0].value,t.guigeArr[t.guigeArrBgc].packing_fee,t.guigeArr[t.guigeArrBgc].sku_id,t.guigeArr[t.guigeArrBgc].stock)}}},[t._v("加入购物车")])])])]):t._e()])},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"header_div"},[i("img",{attrs:{src:"",alt:""}})])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("section",{staticClass:"right_list_footer_add",staticStyle:{display:"none"}},[i("span",[i("i",{staticClass:"el-icon-remove-outline"})]),i("span",[t._v("2")]),i("span",[i("i",{staticClass:"el-icon-circle-plus-outline"})])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("p",{staticClass:"ping_header_right_p3"},[i("span",[t._v("送达时间")]),i("span",[t._v("分钟")])])}],o=(i("a4d3"),i("e01a"),i("4160"),i("b0c0"),i("b64b"),i("07ac"),i("159b"),i("5530")),c=i("2f62"),n={name:"Shop",data:function(){return{shopId:"",shopArr:[],isShow:!0,activeArr:[],leftName:"",leftDescription:"",first:!0,icon_name:"",foodPro:[],description:"",shangArr:[],rightArr:[],dianShow:!1,rightPrice:[],shangShow:!0,pingShow:!1,is_activity_show1:!0,is_activity_show2:!1,fenArr:[],fenleiArr:[],infoArr:[],imgArr:[],chiArr:[],dianji:100,attributesArr:[],icon_name1:"招牌",icon_name2:"新",attributesShow:!0,guiArr:[],guiShow:!1,guigeName:"",guigeId:"",guigeArr:[],guigeArrBgc:100,guiLiPrice:"",guiLiName:"",isShowJian:!1,isShowZero:!1,shopCount:0,priceAll:0,countAll:0,goodsIndex:[],gouShow:!1,isShowNum:!1,isShowGou:!1,foosArr:[],carArr:[],shopCarts:null}},created:function(){var t=this;this.shopId=localStorage.getItem("shopId"),this.axios.get("/shopping/restaurant/"+localStorage.getItem("shopId")).then((function(s){t.shopArr=s,t.activeArr=s.activities,0===t.activeArr.length?(t.icon_name="",t.description="没优惠"):(t.icon_name=s.activities[0].icon_name,t.description=s.activities[0].description)})).catch((function(t){})),this.axios.get("/shopping/v2/menu",{params:{restaurant_id:localStorage.getItem("shopId")}}).then((function(s){t.shangArr=s})).catch((function(t){})),this.axios.get("/ugc/v2/restaurants/"+localStorage.getItem("shopId")+"/ratings/scores").then((function(s){t.fenArr=s})).catch((function(t){})),this.axios.get("/ugc/v2/restaurants/"+localStorage.getItem("shopId")+"/ratings/tags").then((function(s){t.fenleiArr=s})).catch((function(t){})),this.axios.get("/ugc/v2/restaurants/"+localStorage.getItem("shopId")+"/ratings").then((function(s){t.infoArr=s[0],t.imgArr=s[0].item_ratings,t.chiArr=s[0].item_ratings})).catch((function(t){})),this.$store.commit("init_buy_cart"),this.handleCartData()},watch:{shopCart:{handler:function(t,s){this.handleCartData()},deep:!0}},methods:{zuoBtn:function(){this.$router.push({path:"/msite"})},handleCartData:function(){var t=this;this.carArr=[],this.shopCarts=this.$store.state.cartList,Object.keys(this.shopCarts).forEach((function(s){Object.keys(t.shopCarts[s]).forEach((function(i){Object.keys(t.shopCarts[s][i]).forEach((function(e){Object.keys(t.shopCarts[s][i][e]).forEach((function(a){var c=t.shopCarts[s][i][e][a],n=Object(o["a"])({},c,{category_id:i,item_id:e,food_id:a,shopId:s});n.shopId==t.shopId&&t.carArr.push(n)}))}))}))}))},clickBtn:function(){this.shangShow=!this.shangShow,this.pingShow=!this.pingShow,this.is_activity_show1=!this.is_activity_show1,this.is_activity_show2=!this.is_activity_show2},pingBtn:function(){this.shangShow=!this.shangShow,this.pingShow=!this.pingShow,this.is_activity_show1=!this.is_activity_show1,this.is_activity_show2=!this.is_activity_show2},fenBtn:function(t,s,i){this.dianji=t;var e=".count_right>ul:nth-child("+(t+1)+")>li";this.$el.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})},fengNull:function(t){return null==t?"":t.image_text},guiBtn:function(t,s,i){this.guiShow=!0,this.guigeArr=t,console.log(this.guigeArr),this.guigeName=t[0].name,this.guigeId=s,console.log(s)},gouBtn:function(t,s,i,e,a,o,c,n,r){console.log(t,s,i,e,a,o,c,n,r),this.$store.commit("add_cart",{shopid:this.shopId,category_id:t,item_id:s,food_id:i,name:e,price:a,specs:o,packing_fee:c,sku_id:n,stock:r}),this.guiShow=!1},guiLiBtn:function(t,s,i){this.guigeArrBgc=t,this.guiLiPrice=this.guigeArr[t],this.guiLiName=s},chaBtn:function(){this.guiShow=!1},jiaBtn:function(t,s,i,e,a,o,c,n,r){this.$store.commit("add_cart",{shopid:this.shopId,category_id:t,item_id:s,food_id:i,name:e,price:a,specs:o,packing_fee:c,sku_id:n,stock:r})},jianBtn:function(t,s,i,e,a,o,c,n,r,_){this.$store.commit("reduce_cart",{shopid:this.shopId,category_id:s,item_id:i,food_id:e,name:a,price:o,specs:c,packing_fee:n,sku_id:r,stock:_})},jianBtn1:function(t,s,i,e,a,o,c,n,r,_){this.$store.commit("reduce_cart",{shopid:t,category_id:s,item_id:i,food_id:e,name:a,price:o,specs:c,packing_fee:n,sku_id:r,stock:_})},xuanjianBtn:function(){alert("请去购物车列表操作")},jiaBtn1:function(t,s,i,e,a,o,c,n,r,_){this.$store.commit("add_cart",{shopid:t,category_id:s,item_id:i,food_id:e,name:a,price:o,specs:c,packing_fee:n,sku_id:r,stock:_})},gouwucheBtn:function(){this.isShowGou=!this.isShowGou},qingkongBtn:function(){this.$store.commit("delete_cart",{shopid:this.shopId}),this.carShow=!this.carShow},infoBtn:function(t){},xiadanBtn:function(){this.$router.push({path:"/confiemorder"})}},computed:Object(o["a"])({allFoodsPrice:function(){var t=this,s=0;if(this.shopCart){this.$store.state.cartList;Object.keys(this.shopCarts).forEach((function(i){Object.keys(t.shopCarts[i]).forEach((function(e){Object.keys(t.shopCarts[i][e]).forEach((function(a){Object.keys(t.shopCarts[i][e][a]).forEach((function(c){var n=t.shopCarts[i][e][a][c],r=Object(o["a"])({},n,{category_id:e,item_id:a,food_id:c,shopId:i});r.shopId==t.shopId&&(s+=r.num*r.price,localStorage.setItem("allPrice",s))}))}))}))}))}return s},allItemCount:function(){var t=this,s=0;if(this.shopCart){this.$store.state.cartList;Object.keys(this.shopCarts).forEach((function(i){Object.keys(t.shopCarts[i]).forEach((function(e){Object.keys(t.shopCarts[i][e]).forEach((function(a){Object.keys(t.shopCarts[i][e][a]).forEach((function(c){var n=t.shopCarts[i][e][a][c],r=Object(o["a"])({},n,{category_id:e,item_id:a,food_id:c,shopId:i});r.shopId==t.shopId&&(s+=r.num)}))}))}))}))}return s},itemCount:function(){var t=this;return function(s){var i=0;return t.shopCart&&t.shopCart[s]&&(console.log(t.shopCart[s]),Object.values(t.shopCart[s]).forEach((function(t){Object.values(t).forEach((function(t){i+=t.num}))}))),i}}},Object(c["b"])(["cartList"]),{shopCart:function(){return Object.assign({},this.$store.state.cartList[this.shopId])},foodNum:function(){var t=this;return function(s){var i,e=s.category_id,a=s.item_id;if(t.shopCart&&t.shopCart[e]&&t.shopCart[e][a]){return Object.values(t.shopCart[e][a]).forEach((function(t,s){i=t?t.num:0,i})),i}return 0}}})},r=n,_=(i("c567"),i("2877")),l=Object(_["a"])(r,e,a,!1,null,"6b610cb5",null);s["default"]=l.exports},"6f53":function(t,s,i){var e=i("83ab"),a=i("df75"),o=i("fc6a"),c=i("d1e7").f,n=function(t){return function(s){var i,n=o(s),r=a(n),_=r.length,l=0,h=[];while(_>l)i=r[l++],e&&!c.call(n,i)||h.push(t?[i,n[i]]:n[i]);return h}};t.exports={entries:n(!0),values:n(!1)}},afcc:function(t,s,i){},c567:function(t,s,i){"use strict";var e=i("afcc"),a=i.n(e);a.a},e01a:function(t,s,i){"use strict";var e=i("23e7"),a=i("83ab"),o=i("da84"),c=i("5135"),n=i("861d"),r=i("9bf2").f,_=i("e893"),l=o.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),s=this instanceof u?new l(t):void 0===t?l():l(t);return""===t&&(h[s]=!0),s};_(u,l);var p=u.prototype=l.prototype;p.constructor=u;var d=p.toString,g="Symbol(test)"==String(l("test")),f=/^Symbol\((.*)\)[^)]+$/;r(p,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,s=d.call(t);if(c(h,t))return"";var i=g?s.slice(7,-1):s.replace(f,"$1");return""===i?void 0:i}}),e({global:!0,forced:!0},{Symbol:u})}}}]);
//# sourceMappingURL=chunk-3f91fc1c.d7205099.js.map
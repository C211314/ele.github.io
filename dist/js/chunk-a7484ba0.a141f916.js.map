{"version":3,"sources":["webpack:///./src/views/Search.vue?3b55","webpack:///src/views/Search.vue","webpack:///./src/views/Search.vue?0d6a","webpack:///./src/views/Search.vue","webpack:///./src/views/Search.vue?5389"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","directives","name","rawName","value","expression","domProps","on","$event","target","composing","search_value","search_Btn","_l","s","key","id","image_path","_s","recent_order_num","float_minimum_order_amount","distance","_e","s1","index","staticStyle","qingBtn","clearAllPlace","staticRenderFns","component"],"mappings":"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","file":"js/chunk-a7484ba0.a141f916.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"searchWarp\"},[_c('header',[_c('router-link',{attrs:{\"to\":\"/home\"}},[_c('i',{staticClass:\"el-icon-arrow-left\"})]),_c('div',[_vm._v(\"搜索\")])],1),_c('form',{staticClass:\"search_form\",attrs:{\"action\":\"\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search_value),expression:\"search_value\"}],staticClass:\"search_input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入商家或美食名称\"},domProps:{\"value\":(_vm.search_value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search_value=$event.target.value}}}),_c('input',{staticClass:\"search_submit\",attrs:{\"type\":\"submit\",\"placeholder\":\"提交\"},on:{\"click\":_vm.search_Btn}})]),(_vm.isShow1)?_c('section',{staticClass:\"search_history\"},[_c('h4',[_vm._v(\"商家\")]),_c('ul',_vm._l((_vm.searchArr),function(s){return _c('li',{key:s.id,staticClass:\"history_list\"},[_c('section',{staticClass:\"item_left\"},[_c('img',{staticClass:\"restaurant_img\",attrs:{\"src\":'https://elm.cangdu.org/img/'+ s.image_path,\"alt\":\"\"}})]),_c('section',{staticClass:\"item_right\"},[_c('div',{staticClass:\"item_right_text\"},[_c('p',[_c('span',[_vm._v(_vm._s(s.name))]),_c('span',[_vm._v(\"支付\")])]),_c('p',[_vm._v(\"月售\"+_vm._s(s.recent_order_num))]),_c('p',[_vm._v(_vm._s(s.float_minimum_order_amount)+\"元起送/距离\"+_vm._s(s.distance))])]),_c('ul',{staticClass:\"item_right_detail\"})])])}),0),(_vm.isShow2)?_c('section',{staticClass:\"search_history\"},[(_vm.isShowHistoryHeader)?_c('h4',[_vm._v(\"搜索历史\")]):_vm._e(),_c('ul',_vm._l((_vm.hisArr),function(s1,index){return _c('li',{key:index,staticClass:\"history_list\"},[_c('span',{staticClass:\"history_text ellipsis\"},[_vm._v(_vm._s(s1.index))]),_c('i',{staticClass:\"el-icon-close\",staticStyle:{\"width\":\"1rem\",\"height\":\"1rem\"},on:{\"click\":_vm.qingBtn}})])}),0)]):_vm._e(),(_vm.isShowClearBtn)?_c('footer',{staticClass:\"clear_history\",on:{\"click\":_vm.clearAllPlace}},[_vm._v(\"清空搜索历史\")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"footer\"},[_c('router-link',{attrs:{\"to\":\"/msite\"}},[_c('i',{staticClass:\"el-icon-eleme icon_style\"}),_c('span',[_vm._v(\"外卖\")])]),_c('router-link',{attrs:{\"to\":\"/search\"}},[_c('i',{staticClass:\"el-icon-discover icon_style\"}),_c('span',[_vm._v(\"搜索\")])]),_c('router-link',{attrs:{\"to\":\"\"}},[_c('i',{staticClass:\"el-icon-s-fold icon_style\"}),_c('span',[_vm._v(\"订单\")])]),_c('router-link',{attrs:{\"to\":\"/profile\"}},[_c('i',{staticClass:\"el-icon-s-custom icon_style\"}),_c('span',[_vm._v(\"我的\")])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"searchWarp\">\r\n        <header>\r\n            <router-link to=\"/home\">\r\n                <i class=\"el-icon-arrow-left\"></i>\r\n            </router-link>\r\n            <div>搜索</div>\r\n        </header>\r\n        <form action=\"\" class=\"search_form\">\r\n            <input type=\"text\" placeholder=\"请输入商家或美食名称\" class=\"search_input\" v-model=\"search_value\">\r\n            <input type=\"submit\" placeholder=\"提交\" class=\"search_submit\" @click=\"search_Btn\">\r\n        </form>\r\n        <section class=\"search_history\" v-if=\"isShow1\">\r\n            <h4>商家</h4>\r\n            <ul>\r\n                <li class=\"history_list\" v-for=\"s in searchArr\" :key=\"s.id\">\r\n                    <section class=\"item_left\">\r\n                        <img :src=\"'https://elm.cangdu.org/img/'+ s.image_path\" alt=\"\" class=\"restaurant_img\">\r\n                    </section>\r\n                    <section class=\"item_right\">\r\n                        <div class=\"item_right_text\">\r\n                            <p>\r\n                                <span>{{s.name}}</span>\r\n                                <span>支付</span>\r\n                            </p>\r\n                            <p>月售{{s.recent_order_num}}</p>\r\n                            <p>{{s.float_minimum_order_amount}}元起送/距离{{s.distance}}</p>\r\n                        </div>\r\n                        <ul class=\"item_right_detail\"></ul>\r\n                    </section>\r\n                </li>\r\n            </ul>\r\n            <section class=\"search_history\" v-if=\"isShow2\">\r\n                <h4 v-if=\"isShowHistoryHeader\">搜索历史</h4>\r\n                <ul >\r\n                    <li class=\"history_list\" v-for=\"(s1,index) in hisArr\" :key=\"index\">\r\n                        <span class=\"history_text ellipsis\">{{s1.index}}</span>\r\n                        <i class=\"el-icon-close\" style=\"width: 1rem;height: 1rem\" @click=\"qingBtn\"></i>\r\n                    </li>\r\n                </ul>\r\n            </section>\r\n            <footer class=\"clear_history\" v-if=\"isShowClearBtn\" @click=\"clearAllPlace\">清空搜索历史</footer>\r\n        </section>\r\n        <div class=\"footer\">\r\n            <router-link to=\"/msite\">\r\n                <!--<section class=\"footer_list\">-->\r\n                <i class=\"el-icon-eleme icon_style\"></i>\r\n                <span>外卖</span>\r\n                <!--</section>-->\r\n            </router-link>\r\n            <router-link to=\"/search\">\r\n                <!--<section class=\"footer_list\">-->\r\n                <i class=\"el-icon-discover icon_style\"></i>\r\n                <span>搜索</span>\r\n                <!--</section>-->\r\n            </router-link>\r\n            <router-link to=\"\">\r\n                <!--<section class=\"footer_list\">-->\r\n                <i class=\"el-icon-s-fold icon_style\"></i>\r\n                <span>订单</span>\r\n                <!--</section>-->\r\n            </router-link>\r\n            <router-link to=\"/profile\">\r\n                <!--<section class=\"footer_list\">-->\r\n                <i class=\"el-icon-s-custom icon_style\"></i>\r\n                <span>我的</span>\r\n                <!--</section>-->\r\n            </router-link>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"Search\",\r\n        data(){\r\n            return {\r\n                search_value:'',\r\n                searchArr:[],\r\n                isShow1:false,//控制商家\r\n                isShow2:false,//控制历史\r\n                //控制搜索历史的显隐\r\n                isShowHistoryHeader:true,\r\n                //控制清楚历史按钮的显隐\r\n                isShowClearBtn:false,\r\n                hisArr:[],//历史\r\n            }\r\n        },\r\n        created(){\r\n            if (localStorage.getItem(\"searchHistory\")) {\r\n                this.cateArr = JSON.parse(localStorage.getItem(\"searchHistory\"));\r\n                //\r\n                this.isShowClearBtn = true;\r\n            }\r\n        },\r\n        methods:{\r\n            search_Btn(){\r\n                this.axios.get(\"/v4/restaurants\",{\r\n                    params:{\r\n                        geohash:localStorage.getItem('geohashId'),\r\n                        keyword:this.search_value\r\n                    }\r\n                }).then(res=>{\r\n                    console.log(res)\r\n                    this.searchArr = res;\r\n                    this.isShow1 = true;\r\n                    this.isShowClearBtn = false;\r\n                    // if (res.message  ==  \"关键词参数错误\"){\r\n                    //     alert(\"输入为空\")\r\n                    // }\r\n\r\n                }).catch(err=>{});\r\n                if (!localStorage.getItem(\"searchHistory\")){\r\n                    //第一次存\r\n                    let hisArr = [];\r\n                    hisArr.push(this.search_value);\r\n                    localStorage.setItem(\"searchHistory\",JSON.stringify(hisArr));\r\n                } else{\r\n                    //之后存\r\n                    let hisArr = JSON.parse(localStorage.getItem(\"searchHistory\"));\r\n                    hisArr.push(this.search_value);\r\n                    localStorage.setItem(\"searchHistory\",JSON.stringify(hisArr));\r\n                }\r\n            },\r\n            clearAllPlace(){\r\n                //点击清楚所有，删除placeHistory,清空下拉列表，隐藏清空按钮\r\n                localStorage.removeItem(\"searchHistory\");\r\n                this.searchArr = [];\r\n                this.isShowClearBtn = false;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .searchWarp {\r\n        padding-top: 1.95rem;\r\n    }\r\n    header {\r\n        background-color: #3190e8;\r\n        position: fixed;\r\n        z-index: 100;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 1.95rem;\r\n    }\r\n    header>div {\r\n        width: 50%;\r\n        position: absolute;\r\n        left: 50%;\r\n        top: 50%;\r\n        transform: translate(-50%,-50%);\r\n        color: #fff;\r\n        text-align: center;\r\n        font-size: .8rem;\r\n        font-weight:700;\r\n    }\r\n    header>a {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: .4rem;\r\n        transform: translateY(-50%);\r\n        color: #fff;\r\n    }\r\n\r\n    .search_form{\r\n        background-color: #fff;\r\n        padding: .5rem;\r\n        display: flex;\r\n    }\r\n    .search_input{\r\n        flex: 4;\r\n        border: .025rem solid #e4e4e4;\r\n        font-size: .65rem;\r\n        color: #333;\r\n        border-radius: .125rem;\r\n        background-color: #f2f2f2;\r\n        font-weight: 700;\r\n        padding: 0 .25rem;\r\n        height: 1.5rem;\r\n    }\r\n    .search_submit{\r\n        flex: 1;\r\n        border: .025rem solid #3190e8;\r\n        margin-left: .2rem;\r\n        font-size: .65rem;\r\n        color: #fff;\r\n        border-radius: .125rem;\r\n        background-color: #3190e8;\r\n        font-weight: 700;\r\n        padding: 0 .25rem;\r\n        height: 1.5rem;\r\n    }\r\n\r\n    .search_history{}\r\n    .search_history h4{\r\n        font-size: .6rem;\r\n        line-height: 2rem;\r\n        text-indent: .5rem;\r\n        font-weight: 700;\r\n        color: #666;\r\n    }\r\n    .history_list{\r\n        background-color: #fff;\r\n        border-bottom: .025rem solid #e4e4e4;\r\n        font: .7rem/2rem Microsoft YaHei;\r\n        padding: 0 .3rem;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n    }\r\n     .clear_history{\r\n         background-color: #fff;\r\n         color: #3190e8;\r\n         font: .7rem/2rem Microsoft YaHei;\r\n         font-weight: 700;\r\n         text-align: center;\r\n     }\r\n\r\n     .item_left{\r\n         margin-right: .25rem;\r\n     }\r\n     .restaurant_img{\r\n         width: 1.7rem;\r\n         height: 1.7rem;\r\n     }\r\n     .item_right{\r\n         font-size: .55rem;\r\n         flex: 1;\r\n     }\r\n     .item_right_text{\r\n         padding-bottom: .25rem;\r\n         border-bottom: .025rem solid #e4e4e4;\r\n     }\r\n     .item_right_text p{\r\n         line-height: .9rem;\r\n     }\r\n   .item_right_detail{\r\n       margin-top: .25rem;\r\n   }\r\n\r\n   .history_list{\r\n       background-color: #fff;\r\n       border-bottom: .025rem solid #e4e4e4;\r\n       font: .7rem/2rem Microsoft YaHei;\r\n       padding: 0 .3rem;\r\n       display: flex;\r\n       justify-content: space-between;\r\n       align-items: center;\r\n   }\r\n   .history_text{\r\n       display: inline-block;\r\n       width: 80%;\r\n   }\r\n   .ellipsis{\r\n       overflow: hidden;\r\n       text-overflow: ellipsis;\r\n       white-space: nowrap;\r\n   }\r\n\r\n\r\n\r\n\r\n    .footer{\r\n        background-color: #fff;\r\n        position: fixed;\r\n        z-index: 100;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        width: 100%;\r\n        height: 1.95rem;\r\n        display: flex;\r\n        box-shadow: 0 -0.02667rem 0.05333rem rgba(0,0,0,.1);\r\n    }\r\n    .footer a{\r\n        text-decoration: none;\r\n        flex: 1;\r\n        display: flex;\r\n        text-align: center;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        color:#666 ;\r\n    }\r\n    .footer a span{\r\n        padding-top:.3rem;\r\n        font-size: .45rem;\r\n        color: #666;\r\n    }\r\n    .icon_style{\r\n        width: .8rem;\r\n        height: .8rem;\r\n        margin-top: .3rem;\r\n        fill: #ccc;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=61f784a1&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=61f784a1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61f784a1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=61f784a1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=61f784a1&scoped=true&lang=css&\""],"sourceRoot":""}